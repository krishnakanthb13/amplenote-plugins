<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban Board</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: transparent;
        }
        #kanban-board {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding-bottom: 20px;
        }
        .column {
            flex: 0 0 auto;
            min-width: 300px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: transparent;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 10px;
        }
        .task-category {
            margin-bottom: 10px;
            cursor: pointer;
        }
        .task-category h3 {
            margin: 0;
            padding: 10px;
            background: transparent;
            border-radius: 10px;
        }
        .task {
            padding: 5px;
            border-radius: 5px;
            margin-bottom: 5px;
            color: black;
            font-size: 14px;
            position: relative;
            transition: background-color 0.3s;
			max-width: 300px;
        }
        .task-button {
            background-color: transparent;
			border-radius: 5px;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            margin-left: 10px;
			position: absolute;
			right: 5px;
        }
        .task-button:hover {
			background-color: black;
            color: #ddd;
        }
        .task-button2 {
            background-color: transparent;
			border-radius: 5px;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            margin-left: 10px;
			position: absolute;
			right: 20px;
        }
        .task-button2:hover {
			background-color: black;			
            color: #ddd;
        }
		.high-urgent.high-important {
			background: linear-gradient(to right, #ff6666, #ff9999); /* Light red to lighter red */
		}

		.high-urgent.low-important {
			background: linear-gradient(to right, #ffb84d, #ffd699); /* Light orange to lighter orange */
		}

		.low-urgent.high-important {
			background: linear-gradient(to right, #66b3ff, #c2e0ff); /* Light blue to lighter blue */
		}

		.low-urgent.low-important {
			background: linear-gradient(to right, #b3b3b3, #e6e6e6); /* Light gray to lighter gray */
		}
        .task-info {
            display: none;
            position: relative;
            top: 100%;
            left: 30;
            background-color: #fff;
            color: #000;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="kanban-board"></div>

    <script>
        let tasks = [];
        tasks = 
[
  {
    "content": "Review task - Fixed Schedule",
    "hideUntil": null,
    "important": true,
    "noteUUID": "0a0496aa-775c-11ef-bfb2-f222b153c6e3",
    "score": 14.999999999999998,
    "startAt": 1726932266,
    "urgent": false,
    "uuid": "13cd6120-d57a-4761-8520-d556ec7358ed",
    "endAt": 1726933166,
    "repeat": "DTSTART:20240920T205426\nRRULE:FREQ=DAILY",
    "notename": "Review",
    "noteurl": "https://www.amplenote.com/notes/0a0496aa-775c-11ef-bfb2-f222b153c6e3",
    "tags": "-reports/-kanban",
    "startAtz": "09/21/2024 at 20:54:26",
    "hideUntilz": "Not Set!",
    "endAtz": "09/21/2024 at 21:09:26",
    "repeatz": "=daily <b>Starts At:</b> 09/20/2024 at T2:05:42",
    "taskInfo": "<b>Important:</b> true<br><b>Urgent:</b> false<br><b>Score:</b> 15.00<br><hr><b>Start At:</b> 09/21/2024 at 20:54:26<br><b>Hide Until:</b> Not Set!<br><b>End At:</b> 09/21/2024 at 21:09:26<br><b>Repeat:</b> =daily <b>Starts At:</b> 09/20/2024 at T2:05:42<br><hr><b>Note Link:</b> <a href=\"https://www.amplenote.com/notes/0a0496aa-775c-11ef-bfb2-f222b153c6e3\" target=\"_blank\">Review</a><br><b>Tags:</b> -reports/-kanban"
  },
  {
    "content": "Review task - When Tasks is completed",
    "hideUntil": null,
    "important": true,
    "noteUUID": "0a0496aa-775c-11ef-bfb2-f222b153c6e3",
    "score": 10,
    "startAt": null,
    "urgent": true,
    "uuid": "3365680f-f67a-4c8b-84a1-2c5dc8988c87",
    "notename": "Review",
    "noteurl": "https://www.amplenote.com/notes/0a0496aa-775c-11ef-bfb2-f222b153c6e3",
    "tags": "-reports/-kanban",
    "startAtz": "Not Set!",
    "hideUntilz": "Not Set!",
    "endAtz": "Not Set!",
    "repeatz": "Not Available",
    "taskInfo": "<b>Important:</b> true<br><b>Urgent:</b> true<br><b>Score:</b> 10.00<br><hr><b>Start At:</b> Not Set!<br><b>Hide Until:</b> Not Set!<br><b>End At:</b> Not Set!<br><b>Repeat:</b> Not Available<br><hr><b>Note Link:</b> <a href=\"https://www.amplenote.com/notes/0a0496aa-775c-11ef-bfb2-f222b153c6e3\" target=\"_blank\">Review</a><br><b>Tags:</b> -reports/-kanban"
  }
]
;

try {

    // Function to determine the CSS class based on task urgency and importance
	function getColor(task) {
		return task.urgent ? (task.important ? 'high-urgent high-important' : 'high-urgent low-important') : (task.important ? 'low-urgent high-important' : 'low-urgent low-important');
	}

	function showTaskInfo(task, element) {
		let infoDiv = element.querySelector('.task-info');
		if (!infoDiv) {
			infoDiv = document.createElement('div');
			infoDiv.className = 'task-info';
			infoDiv.innerHTML = task.taskInfo;
			element.appendChild(infoDiv);
		}
		infoDiv.style.display = 'block';
	}

	function hideTaskInfo(element) {
		const infoDiv = element.querySelector('.task-info');
		if (infoDiv) infoDiv.style.display = 'none';
	}

	function createTaskItem(task, actionHandlers = {}) {
		const taskItem = document.createElement('div');
		taskItem.className = 'task ' + getColor(task);
		taskItem.textContent = task.content;

		const infoButton = document.createElement('button');
		infoButton.textContent = 'ℹ';
		infoButton.className = 'task-button';
		infoButton.onclick = () => showTaskInfo(task, taskItem);
		taskItem.appendChild(infoButton);
		taskItem.onmouseleave = () => hideTaskInfo(taskItem);

		if (actionHandlers.infoButton2) {
			const infoButton2 = document.createElement('button');
			infoButton2.textContent = '⚙';
			infoButton2.className = 'task-button2';
			infoButton2.onclick = actionHandlers.infoButton2;
			taskItem.appendChild(infoButton2);
		}

		return taskItem;
	}

	function renderKanbanBoard() {
		const board = document.getElementById('kanban-board');
		const columns = {};

		for (let i = 0; i < tasks.length; i++) {
			const task = tasks[i];
			const note = task.notename;
			if (!columns[note]) {
				columns[note] = { pending: [], completed: [], dismissed: [] };
			}
			if (task.completedAt) {
				columns[note].completed.push(task);
			} else if (task.dismissedAt) {
				columns[note].dismissed.push(task);
			} else {
				columns[note].pending.push(task);
			}
		}

		board.innerHTML = '';

		for (const note in columns) {
			if (columns.hasOwnProperty(note)) {
				const column = document.createElement('div');
				column.className = 'column';

				const header = document.createElement('h3');
				header.textContent = note;
				header.className = 'task-category';
				column.appendChild(header);

				const taskLists = {
					pending: 'Pending',
					completed: 'Completed',
					dismissed: 'Dismissed'
				};

				for (const key in taskLists) {
					if (taskLists.hasOwnProperty(key)) {
						const listDiv = document.createElement('div');
						listDiv.innerHTML = '<strong>' + taskLists[key] + ':</strong>';

						for (let j = 0; j < columns[note][key].length; j++) {
							const task = columns[note][key][j];
							const taskItem = createTaskItem(task, {
								// infoButton2: () => window.callAmplenotePlugin("taskEdit", task.uuid)
							});
							listDiv.appendChild(taskItem);
						}

						column.appendChild(listDiv);
					}
				}

				board.appendChild(column);
			}
		}
	}

    renderKanbanBoard();

} catch (error) {
    console.error("Error processing scripts:", error);
}
    </script>
</body>
</html>